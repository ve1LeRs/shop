{"ast":null,"code":"\"use strict\";\n\n// Copyright 2019 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GoogleAuth = exports.CLOUD_SDK_CLIENT_ID = void 0;\nconst child_process_1 = require(\"child_process\");\nconst fs = require(\"fs\");\nconst gcpMetadata = require(\"gcp-metadata\");\nconst os = require(\"os\");\nconst path = require(\"path\");\nconst crypto_1 = require(\"../crypto/crypto\");\nconst transporters_1 = require(\"../transporters\");\nconst computeclient_1 = require(\"./computeclient\");\nconst idtokenclient_1 = require(\"./idtokenclient\");\nconst envDetect_1 = require(\"./envDetect\");\nconst jwtclient_1 = require(\"./jwtclient\");\nconst refreshclient_1 = require(\"./refreshclient\");\nexports.CLOUD_SDK_CLIENT_ID = '764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com';\nclass GoogleAuth {\n  constructor(opts) {\n    /**\n     * Caches a value indicating whether the auth layer is running on Google\n     * Compute Engine.\n     * @private\n     */\n    this.checkIsGCE = undefined;\n    // To save the contents of the JSON credential file\n    this.jsonContent = null;\n    this.cachedCredential = null;\n    opts = opts || {};\n    this._cachedProjectId = opts.projectId || null;\n    this.keyFilename = opts.keyFilename || opts.keyFile;\n    this.scopes = opts.scopes;\n    this.jsonContent = opts.credentials || null;\n    this.clientOptions = opts.clientOptions;\n  }\n  // Note:  this properly is only public to satisify unit tests.\n  // https://github.com/Microsoft/TypeScript/issues/5228\n  get isGCE() {\n    return this.checkIsGCE;\n  }\n  getProjectId(callback) {\n    if (callback) {\n      this.getProjectIdAsync().then(r => callback(null, r), callback);\n    } else {\n      return this.getProjectIdAsync();\n    }\n  }\n  getProjectIdAsync() {\n    if (this._cachedProjectId) {\n      return Promise.resolve(this._cachedProjectId);\n    }\n    // In implicit case, supports three environments. In order of precedence,\n    // the implicit environments are:\n    // - GCLOUD_PROJECT or GOOGLE_CLOUD_PROJECT environment variable\n    // - GOOGLE_APPLICATION_CREDENTIALS JSON file\n    // - Cloud SDK: `gcloud config config-helper --format json`\n    // - GCE project ID from metadata server)\n    if (!this._getDefaultProjectIdPromise) {\n      // TODO: refactor the below code so that it doesn't mix and match\n      // promises and async/await.\n      this._getDefaultProjectIdPromise = new Promise(\n      // eslint-disable-next-line no-async-promise-executor\n      async (resolve, reject) => {\n        try {\n          const projectId = this.getProductionProjectId() || (await this.getFileProjectId()) || (await this.getDefaultServiceProjectId()) || (await this.getGCEProjectId());\n          this._cachedProjectId = projectId;\n          if (!projectId) {\n            throw new Error('Unable to detect a Project Id in the current environment. \\n' + 'To learn more about authentication and Google APIs, visit: \\n' + 'https://cloud.google.com/docs/authentication/getting-started');\n          }\n          resolve(projectId);\n        } catch (e) {\n          reject(e);\n        }\n      });\n    }\n    return this._getDefaultProjectIdPromise;\n  }\n  getApplicationDefault() {\n    let optionsOrCallback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 ? arguments[1] : undefined;\n    let options;\n    if (typeof optionsOrCallback === 'function') {\n      callback = optionsOrCallback;\n    } else {\n      options = optionsOrCallback;\n    }\n    if (callback) {\n      this.getApplicationDefaultAsync(options).then(r => callback(null, r.credential, r.projectId), callback);\n    } else {\n      return this.getApplicationDefaultAsync(options);\n    }\n  }\n  async getApplicationDefaultAsync() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // If we've already got a cached credential, just return it.\n    if (this.cachedCredential) {\n      return {\n        credential: this.cachedCredential,\n        projectId: await this.getProjectIdAsync()\n      };\n    }\n    let credential;\n    let projectId;\n    // Check for the existence of a local environment variable pointing to the\n    // location of the credential file. This is typically used in local\n    // developer scenarios.\n    credential = await this._tryGetApplicationCredentialsFromEnvironmentVariable(options);\n    if (credential) {\n      if (credential instanceof jwtclient_1.JWT) {\n        credential.defaultScopes = this.defaultScopes;\n        credential.scopes = this.scopes;\n      }\n      this.cachedCredential = credential;\n      projectId = await this.getProjectId();\n      return {\n        credential,\n        projectId\n      };\n    }\n    // Look in the well-known credential file location.\n    credential = await this._tryGetApplicationCredentialsFromWellKnownFile(options);\n    if (credential) {\n      if (credential instanceof jwtclient_1.JWT) {\n        credential.defaultScopes = this.defaultScopes;\n        credential.scopes = this.scopes;\n      }\n      this.cachedCredential = credential;\n      projectId = await this.getProjectId();\n      return {\n        credential,\n        projectId\n      };\n    }\n    // Determine if we're running on GCE.\n    let isGCE;\n    try {\n      isGCE = await this._checkIsGCE();\n    } catch (e) {\n      e.message = `Unexpected error determining execution environment: ${e.message}`;\n      throw e;\n    }\n    if (!isGCE) {\n      // We failed to find the default credentials. Bail out with an error.\n      throw new Error('Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.');\n    }\n    // For GCE, just return a default ComputeClient. It will take care of\n    // the rest.\n    options.scopes = this.scopes || this.defaultScopes;\n    this.cachedCredential = new computeclient_1.Compute(options);\n    projectId = await this.getProjectId();\n    return {\n      projectId,\n      credential: this.cachedCredential\n    };\n  }\n  /**\n   * Determines whether the auth layer is running on Google Compute Engine.\n   * @returns A promise that resolves with the boolean.\n   * @api private\n   */\n  async _checkIsGCE() {\n    if (this.checkIsGCE === undefined) {\n      this.checkIsGCE = await gcpMetadata.isAvailable();\n    }\n    return this.checkIsGCE;\n  }\n  /**\n   * Attempts to load default credentials from the environment variable path..\n   * @returns Promise that resolves with the OAuth2Client or null.\n   * @api private\n   */\n  async _tryGetApplicationCredentialsFromEnvironmentVariable(options) {\n    const credentialsPath = process.env['GOOGLE_APPLICATION_CREDENTIALS'] || process.env['google_application_credentials'];\n    if (!credentialsPath || credentialsPath.length === 0) {\n      return null;\n    }\n    try {\n      return this._getApplicationCredentialsFromFilePath(credentialsPath, options);\n    } catch (e) {\n      e.message = `Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${e.message}`;\n      throw e;\n    }\n  }\n  /**\n   * Attempts to load default credentials from a well-known file location\n   * @return Promise that resolves with the OAuth2Client or null.\n   * @api private\n   */\n  async _tryGetApplicationCredentialsFromWellKnownFile(options) {\n    // First, figure out the location of the file, depending upon the OS type.\n    let location = null;\n    if (this._isWindows()) {\n      // Windows\n      location = process.env['APPDATA'];\n    } else {\n      // Linux or Mac\n      const home = process.env['HOME'];\n      if (home) {\n        location = path.join(home, '.config');\n      }\n    }\n    // If we found the root path, expand it.\n    if (location) {\n      location = path.join(location, 'gcloud', 'application_default_credentials.json');\n      if (!fs.existsSync(location)) {\n        location = null;\n      }\n    }\n    // The file does not exist.\n    if (!location) {\n      return null;\n    }\n    // The file seems to exist. Try to use it.\n    const client = await this._getApplicationCredentialsFromFilePath(location, options);\n    return client;\n  }\n  /**\n   * Attempts to load default credentials from a file at the given path..\n   * @param filePath The path to the file to read.\n   * @returns Promise that resolves with the OAuth2Client\n   * @api private\n   */\n  async _getApplicationCredentialsFromFilePath(filePath) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    // Make sure the path looks like a string.\n    if (!filePath || filePath.length === 0) {\n      throw new Error('The file path is invalid.');\n    }\n    // Make sure there is a file at the path. lstatSync will throw if there is\n    // nothing there.\n    try {\n      // Resolve path to actual file in case of symlink. Expect a thrown error\n      // if not resolvable.\n      filePath = fs.realpathSync(filePath);\n      if (!fs.lstatSync(filePath).isFile()) {\n        throw new Error();\n      }\n    } catch (err) {\n      err.message = `The file at ${filePath} does not exist, or it is not a file. ${err.message}`;\n      throw err;\n    }\n    // Now open a read stream on the file, and parse it.\n    const readStream = fs.createReadStream(filePath);\n    return this.fromStream(readStream, options);\n  }\n  /**\n   * Create a credentials instance using the given input options.\n   * @param json The input object.\n   * @param options The JWT or UserRefresh options for the client\n   * @returns JWT or UserRefresh Client with data\n   */\n  fromJSON(json, options) {\n    let client;\n    if (!json) {\n      throw new Error('Must pass in a JSON object containing the Google auth settings.');\n    }\n    options = options || {};\n    if (json.type === 'authorized_user') {\n      client = new refreshclient_1.UserRefreshClient(options);\n    } else {\n      options.scopes = this.scopes;\n      client = new jwtclient_1.JWT(options);\n      client.defaultScopes = this.defaultScopes;\n    }\n    client.fromJSON(json);\n    return client;\n  }\n  /**\n   * Return a JWT or UserRefreshClient from JavaScript object, caching both the\n   * object used to instantiate and the client.\n   * @param json The input object.\n   * @param options The JWT or UserRefresh options for the client\n   * @returns JWT or UserRefresh Client with data\n   */\n  _cacheClientFromJSON(json, options) {\n    let client;\n    // create either a UserRefreshClient or JWT client.\n    options = options || {};\n    if (json.type === 'authorized_user') {\n      client = new refreshclient_1.UserRefreshClient(options);\n    } else {\n      options.scopes = this.scopes;\n      client = new jwtclient_1.JWT(options);\n      client.defaultScopes = this.defaultScopes;\n    }\n    client.fromJSON(json);\n    // cache both raw data used to instantiate client and client itself.\n    this.jsonContent = json;\n    this.cachedCredential = client;\n    return this.cachedCredential;\n  }\n  fromStream(inputStream) {\n    let optionsOrCallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let callback = arguments.length > 2 ? arguments[2] : undefined;\n    let options = {};\n    if (typeof optionsOrCallback === 'function') {\n      callback = optionsOrCallback;\n    } else {\n      options = optionsOrCallback;\n    }\n    if (callback) {\n      this.fromStreamAsync(inputStream, options).then(r => callback(null, r), callback);\n    } else {\n      return this.fromStreamAsync(inputStream, options);\n    }\n  }\n  fromStreamAsync(inputStream, options) {\n    return new Promise((resolve, reject) => {\n      if (!inputStream) {\n        throw new Error('Must pass in a stream containing the Google auth settings.');\n      }\n      let s = '';\n      inputStream.setEncoding('utf8').on('error', reject).on('data', chunk => s += chunk).on('end', () => {\n        try {\n          try {\n            const data = JSON.parse(s);\n            const r = this._cacheClientFromJSON(data, options);\n            return resolve(r);\n          } catch (err) {\n            // If we failed parsing this.keyFileName, assume that it\n            // is a PEM or p12 certificate:\n            if (!this.keyFilename) throw err;\n            const client = new jwtclient_1.JWT({\n              ...this.clientOptions,\n              keyFile: this.keyFilename\n            });\n            this.cachedCredential = client;\n            return resolve(client);\n          }\n        } catch (err) {\n          return reject(err);\n        }\n      });\n    });\n  }\n  /**\n   * Create a credentials instance using the given API key string.\n   * @param apiKey The API key string\n   * @param options An optional options object.\n   * @returns A JWT loaded from the key\n   */\n  fromAPIKey(apiKey, options) {\n    options = options || {};\n    const client = new jwtclient_1.JWT(options);\n    client.fromAPIKey(apiKey);\n    return client;\n  }\n  /**\n   * Determines whether the current operating system is Windows.\n   * @api private\n   */\n  _isWindows() {\n    const sys = os.platform();\n    if (sys && sys.length >= 3) {\n      if (sys.substring(0, 3).toLowerCase() === 'win') {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Run the Google Cloud SDK command that prints the default project ID\n   */\n  async getDefaultServiceProjectId() {\n    return new Promise(resolve => {\n      child_process_1.exec('gcloud config config-helper --format json', (err, stdout) => {\n        if (!err && stdout) {\n          try {\n            const projectId = JSON.parse(stdout).configuration.properties.core.project;\n            resolve(projectId);\n            return;\n          } catch (e) {\n            // ignore errors\n          }\n        }\n        resolve(null);\n      });\n    });\n  }\n  /**\n   * Loads the project id from environment variables.\n   * @api private\n   */\n  getProductionProjectId() {\n    return process.env['GCLOUD_PROJECT'] || process.env['GOOGLE_CLOUD_PROJECT'] || process.env['gcloud_project'] || process.env['google_cloud_project'];\n  }\n  /**\n   * Loads the project id from the GOOGLE_APPLICATION_CREDENTIALS json file.\n   * @api private\n   */\n  async getFileProjectId() {\n    if (this.cachedCredential) {\n      // Try to read the project ID from the cached credentials file\n      return this.cachedCredential.projectId;\n    }\n    // Ensure the projectId is loaded from the keyFile if available.\n    if (this.keyFilename) {\n      const creds = await this.getClient();\n      if (creds && creds.projectId) {\n        return creds.projectId;\n      }\n    }\n    // Try to load a credentials file and read its project ID\n    const r = await this._tryGetApplicationCredentialsFromEnvironmentVariable();\n    if (r) {\n      return r.projectId;\n    } else {\n      return null;\n    }\n  }\n  /**\n   * Gets the Compute Engine project ID if it can be inferred.\n   */\n  async getGCEProjectId() {\n    try {\n      const r = await gcpMetadata.project('project-id');\n      return r;\n    } catch (e) {\n      // Ignore any errors\n      return null;\n    }\n  }\n  getCredentials(callback) {\n    if (callback) {\n      this.getCredentialsAsync().then(r => callback(null, r), callback);\n    } else {\n      return this.getCredentialsAsync();\n    }\n  }\n  async getCredentialsAsync() {\n    await this.getClient();\n    if (this.jsonContent) {\n      const credential = {\n        client_email: this.jsonContent.client_email,\n        private_key: this.jsonContent.private_key\n      };\n      return credential;\n    }\n    const isGCE = await this._checkIsGCE();\n    if (!isGCE) {\n      throw new Error('Unknown error.');\n    }\n    // For GCE, return the service account details from the metadata server\n    // NOTE: The trailing '/' at the end of service-accounts/ is very important!\n    // The GCF metadata server doesn't respect querystring params if this / is\n    // not included.\n    const data = await gcpMetadata.instance({\n      property: 'service-accounts/',\n      params: {\n        recursive: 'true'\n      }\n    });\n    if (!data || !data.default || !data.default.email) {\n      throw new Error('Failure from metadata server.');\n    }\n    return {\n      client_email: data.default.email\n    };\n  }\n  /**\n   * Automatically obtain a client based on the provided configuration.  If no\n   * options were passed, use Application Default Credentials.\n   */\n  async getClient(options) {\n    if (options) {\n      throw new Error('Passing options to getClient is forbidden in v5.0.0. Use new GoogleAuth(opts) instead.');\n    }\n    if (!this.cachedCredential) {\n      if (this.jsonContent) {\n        this._cacheClientFromJSON(this.jsonContent, this.clientOptions);\n      } else if (this.keyFilename) {\n        const filePath = path.resolve(this.keyFilename);\n        const stream = fs.createReadStream(filePath);\n        await this.fromStreamAsync(stream, this.clientOptions);\n      } else {\n        await this.getApplicationDefaultAsync(this.clientOptions);\n      }\n    }\n    return this.cachedCredential;\n  }\n  /**\n   * Creates a client which will fetch an ID token for authorization.\n   * @param targetAudience the audience for the fetched ID token.\n   * @returns IdTokenClient for making HTTP calls authenticated with ID tokens.\n   */\n  async getIdTokenClient(targetAudience) {\n    const client = await this.getClient();\n    if (!('fetchIdToken' in client)) {\n      throw new Error('Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.');\n    }\n    return new idtokenclient_1.IdTokenClient({\n      targetAudience,\n      idTokenProvider: client\n    });\n  }\n  /**\n   * Automatically obtain application default credentials, and return\n   * an access token for making requests.\n   */\n  async getAccessToken() {\n    const client = await this.getClient();\n    return (await client.getAccessToken()).token;\n  }\n  /**\n   * Obtain the HTTP headers that will provide authorization for a given\n   * request.\n   */\n  async getRequestHeaders(url) {\n    const client = await this.getClient();\n    return client.getRequestHeaders(url);\n  }\n  /**\n   * Obtain credentials for a request, then attach the appropriate headers to\n   * the request options.\n   * @param opts Axios or Request options on which to attach the headers\n   */\n  async authorizeRequest(opts) {\n    opts = opts || {};\n    const url = opts.url || opts.uri;\n    const client = await this.getClient();\n    const headers = await client.getRequestHeaders(url);\n    opts.headers = Object.assign(opts.headers || {}, headers);\n    return opts;\n  }\n  /**\n   * Automatically obtain application default credentials, and make an\n   * HTTP request using the given options.\n   * @param opts Axios request options for the HTTP request.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  async request(opts) {\n    const client = await this.getClient();\n    return client.request(opts);\n  }\n  /**\n   * Determine the compute environment in which the code is running.\n   */\n  getEnv() {\n    return envDetect_1.getEnv();\n  }\n  /**\n   * Sign the given data with the current private key, or go out\n   * to the IAM API to sign it.\n   * @param data The data to be signed.\n   */\n  async sign(data) {\n    const client = await this.getClient();\n    const crypto = crypto_1.createCrypto();\n    if (client instanceof jwtclient_1.JWT && client.key) {\n      const sign = await crypto.sign(client.key, data);\n      return sign;\n    }\n    const projectId = await this.getProjectId();\n    if (!projectId) {\n      throw new Error('Cannot sign data without a project ID.');\n    }\n    const creds = await this.getCredentials();\n    if (!creds.client_email) {\n      throw new Error('Cannot sign data without `client_email`.');\n    }\n    const url = `https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/${creds.client_email}:signBlob`;\n    const res = await this.request({\n      method: 'POST',\n      url,\n      data: {\n        payload: crypto.encodeBase64StringUtf8(data)\n      }\n    });\n    return res.data.signedBlob;\n  }\n}\nexports.GoogleAuth = GoogleAuth;\n/**\n * Export DefaultTransporter as a static property of the class.\n */\nGoogleAuth.DefaultTransporter = transporters_1.DefaultTransporter;","map":{"version":3,"names":["Object","defineProperty","exports","value","GoogleAuth","CLOUD_SDK_CLIENT_ID","child_process_1","require","fs","gcpMetadata","os","path","crypto_1","transporters_1","computeclient_1","idtokenclient_1","envDetect_1","jwtclient_1","refreshclient_1","constructor","opts","checkIsGCE","undefined","jsonContent","cachedCredential","_cachedProjectId","projectId","keyFilename","keyFile","scopes","credentials","clientOptions","isGCE","getProjectId","callback","getProjectIdAsync","then","r","Promise","resolve","_getDefaultProjectIdPromise","reject","getProductionProjectId","getFileProjectId","getDefaultServiceProjectId","getGCEProjectId","Error","e","getApplicationDefault","optionsOrCallback","arguments","length","options","getApplicationDefaultAsync","credential","_tryGetApplicationCredentialsFromEnvironmentVariable","JWT","defaultScopes","_tryGetApplicationCredentialsFromWellKnownFile","_checkIsGCE","message","Compute","isAvailable","credentialsPath","process","env","_getApplicationCredentialsFromFilePath","location","_isWindows","home","join","existsSync","client","filePath","realpathSync","lstatSync","isFile","err","readStream","createReadStream","fromStream","fromJSON","json","type","UserRefreshClient","_cacheClientFromJSON","inputStream","fromStreamAsync","s","setEncoding","on","chunk","data","JSON","parse","fromAPIKey","apiKey","sys","platform","substring","toLowerCase","exec","stdout","configuration","properties","core","project","creds","getClient","getCredentials","getCredentialsAsync","client_email","private_key","instance","property","params","recursive","default","email","stream","getIdTokenClient","targetAudience","IdTokenClient","idTokenProvider","getAccessToken","token","getRequestHeaders","url","authorizeRequest","uri","headers","assign","request","getEnv","sign","crypto","createCrypto","key","res","method","payload","encodeBase64StringUtf8","signedBlob","DefaultTransporter"],"sources":["C:/Users/79818/shop1/node_modules/google-auth-library/build/src/auth/googleauth.js"],"sourcesContent":["\"use strict\";\n// Copyright 2019 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GoogleAuth = exports.CLOUD_SDK_CLIENT_ID = void 0;\nconst child_process_1 = require(\"child_process\");\nconst fs = require(\"fs\");\nconst gcpMetadata = require(\"gcp-metadata\");\nconst os = require(\"os\");\nconst path = require(\"path\");\nconst crypto_1 = require(\"../crypto/crypto\");\nconst transporters_1 = require(\"../transporters\");\nconst computeclient_1 = require(\"./computeclient\");\nconst idtokenclient_1 = require(\"./idtokenclient\");\nconst envDetect_1 = require(\"./envDetect\");\nconst jwtclient_1 = require(\"./jwtclient\");\nconst refreshclient_1 = require(\"./refreshclient\");\nexports.CLOUD_SDK_CLIENT_ID = '764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com';\nclass GoogleAuth {\n    constructor(opts) {\n        /**\n         * Caches a value indicating whether the auth layer is running on Google\n         * Compute Engine.\n         * @private\n         */\n        this.checkIsGCE = undefined;\n        // To save the contents of the JSON credential file\n        this.jsonContent = null;\n        this.cachedCredential = null;\n        opts = opts || {};\n        this._cachedProjectId = opts.projectId || null;\n        this.keyFilename = opts.keyFilename || opts.keyFile;\n        this.scopes = opts.scopes;\n        this.jsonContent = opts.credentials || null;\n        this.clientOptions = opts.clientOptions;\n    }\n    // Note:  this properly is only public to satisify unit tests.\n    // https://github.com/Microsoft/TypeScript/issues/5228\n    get isGCE() {\n        return this.checkIsGCE;\n    }\n    getProjectId(callback) {\n        if (callback) {\n            this.getProjectIdAsync().then(r => callback(null, r), callback);\n        }\n        else {\n            return this.getProjectIdAsync();\n        }\n    }\n    getProjectIdAsync() {\n        if (this._cachedProjectId) {\n            return Promise.resolve(this._cachedProjectId);\n        }\n        // In implicit case, supports three environments. In order of precedence,\n        // the implicit environments are:\n        // - GCLOUD_PROJECT or GOOGLE_CLOUD_PROJECT environment variable\n        // - GOOGLE_APPLICATION_CREDENTIALS JSON file\n        // - Cloud SDK: `gcloud config config-helper --format json`\n        // - GCE project ID from metadata server)\n        if (!this._getDefaultProjectIdPromise) {\n            // TODO: refactor the below code so that it doesn't mix and match\n            // promises and async/await.\n            this._getDefaultProjectIdPromise = new Promise(\n            // eslint-disable-next-line no-async-promise-executor\n            async (resolve, reject) => {\n                try {\n                    const projectId = this.getProductionProjectId() ||\n                        (await this.getFileProjectId()) ||\n                        (await this.getDefaultServiceProjectId()) ||\n                        (await this.getGCEProjectId());\n                    this._cachedProjectId = projectId;\n                    if (!projectId) {\n                        throw new Error('Unable to detect a Project Id in the current environment. \\n' +\n                            'To learn more about authentication and Google APIs, visit: \\n' +\n                            'https://cloud.google.com/docs/authentication/getting-started');\n                    }\n                    resolve(projectId);\n                }\n                catch (e) {\n                    reject(e);\n                }\n            });\n        }\n        return this._getDefaultProjectIdPromise;\n    }\n    getApplicationDefault(optionsOrCallback = {}, callback) {\n        let options;\n        if (typeof optionsOrCallback === 'function') {\n            callback = optionsOrCallback;\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        if (callback) {\n            this.getApplicationDefaultAsync(options).then(r => callback(null, r.credential, r.projectId), callback);\n        }\n        else {\n            return this.getApplicationDefaultAsync(options);\n        }\n    }\n    async getApplicationDefaultAsync(options = {}) {\n        // If we've already got a cached credential, just return it.\n        if (this.cachedCredential) {\n            return {\n                credential: this.cachedCredential,\n                projectId: await this.getProjectIdAsync(),\n            };\n        }\n        let credential;\n        let projectId;\n        // Check for the existence of a local environment variable pointing to the\n        // location of the credential file. This is typically used in local\n        // developer scenarios.\n        credential = await this._tryGetApplicationCredentialsFromEnvironmentVariable(options);\n        if (credential) {\n            if (credential instanceof jwtclient_1.JWT) {\n                credential.defaultScopes = this.defaultScopes;\n                credential.scopes = this.scopes;\n            }\n            this.cachedCredential = credential;\n            projectId = await this.getProjectId();\n            return { credential, projectId };\n        }\n        // Look in the well-known credential file location.\n        credential = await this._tryGetApplicationCredentialsFromWellKnownFile(options);\n        if (credential) {\n            if (credential instanceof jwtclient_1.JWT) {\n                credential.defaultScopes = this.defaultScopes;\n                credential.scopes = this.scopes;\n            }\n            this.cachedCredential = credential;\n            projectId = await this.getProjectId();\n            return { credential, projectId };\n        }\n        // Determine if we're running on GCE.\n        let isGCE;\n        try {\n            isGCE = await this._checkIsGCE();\n        }\n        catch (e) {\n            e.message = `Unexpected error determining execution environment: ${e.message}`;\n            throw e;\n        }\n        if (!isGCE) {\n            // We failed to find the default credentials. Bail out with an error.\n            throw new Error('Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.');\n        }\n        // For GCE, just return a default ComputeClient. It will take care of\n        // the rest.\n        options.scopes = this.scopes || this.defaultScopes;\n        this.cachedCredential = new computeclient_1.Compute(options);\n        projectId = await this.getProjectId();\n        return { projectId, credential: this.cachedCredential };\n    }\n    /**\n     * Determines whether the auth layer is running on Google Compute Engine.\n     * @returns A promise that resolves with the boolean.\n     * @api private\n     */\n    async _checkIsGCE() {\n        if (this.checkIsGCE === undefined) {\n            this.checkIsGCE = await gcpMetadata.isAvailable();\n        }\n        return this.checkIsGCE;\n    }\n    /**\n     * Attempts to load default credentials from the environment variable path..\n     * @returns Promise that resolves with the OAuth2Client or null.\n     * @api private\n     */\n    async _tryGetApplicationCredentialsFromEnvironmentVariable(options) {\n        const credentialsPath = process.env['GOOGLE_APPLICATION_CREDENTIALS'] ||\n            process.env['google_application_credentials'];\n        if (!credentialsPath || credentialsPath.length === 0) {\n            return null;\n        }\n        try {\n            return this._getApplicationCredentialsFromFilePath(credentialsPath, options);\n        }\n        catch (e) {\n            e.message = `Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${e.message}`;\n            throw e;\n        }\n    }\n    /**\n     * Attempts to load default credentials from a well-known file location\n     * @return Promise that resolves with the OAuth2Client or null.\n     * @api private\n     */\n    async _tryGetApplicationCredentialsFromWellKnownFile(options) {\n        // First, figure out the location of the file, depending upon the OS type.\n        let location = null;\n        if (this._isWindows()) {\n            // Windows\n            location = process.env['APPDATA'];\n        }\n        else {\n            // Linux or Mac\n            const home = process.env['HOME'];\n            if (home) {\n                location = path.join(home, '.config');\n            }\n        }\n        // If we found the root path, expand it.\n        if (location) {\n            location = path.join(location, 'gcloud', 'application_default_credentials.json');\n            if (!fs.existsSync(location)) {\n                location = null;\n            }\n        }\n        // The file does not exist.\n        if (!location) {\n            return null;\n        }\n        // The file seems to exist. Try to use it.\n        const client = await this._getApplicationCredentialsFromFilePath(location, options);\n        return client;\n    }\n    /**\n     * Attempts to load default credentials from a file at the given path..\n     * @param filePath The path to the file to read.\n     * @returns Promise that resolves with the OAuth2Client\n     * @api private\n     */\n    async _getApplicationCredentialsFromFilePath(filePath, options = {}) {\n        // Make sure the path looks like a string.\n        if (!filePath || filePath.length === 0) {\n            throw new Error('The file path is invalid.');\n        }\n        // Make sure there is a file at the path. lstatSync will throw if there is\n        // nothing there.\n        try {\n            // Resolve path to actual file in case of symlink. Expect a thrown error\n            // if not resolvable.\n            filePath = fs.realpathSync(filePath);\n            if (!fs.lstatSync(filePath).isFile()) {\n                throw new Error();\n            }\n        }\n        catch (err) {\n            err.message = `The file at ${filePath} does not exist, or it is not a file. ${err.message}`;\n            throw err;\n        }\n        // Now open a read stream on the file, and parse it.\n        const readStream = fs.createReadStream(filePath);\n        return this.fromStream(readStream, options);\n    }\n    /**\n     * Create a credentials instance using the given input options.\n     * @param json The input object.\n     * @param options The JWT or UserRefresh options for the client\n     * @returns JWT or UserRefresh Client with data\n     */\n    fromJSON(json, options) {\n        let client;\n        if (!json) {\n            throw new Error('Must pass in a JSON object containing the Google auth settings.');\n        }\n        options = options || {};\n        if (json.type === 'authorized_user') {\n            client = new refreshclient_1.UserRefreshClient(options);\n        }\n        else {\n            options.scopes = this.scopes;\n            client = new jwtclient_1.JWT(options);\n            client.defaultScopes = this.defaultScopes;\n        }\n        client.fromJSON(json);\n        return client;\n    }\n    /**\n     * Return a JWT or UserRefreshClient from JavaScript object, caching both the\n     * object used to instantiate and the client.\n     * @param json The input object.\n     * @param options The JWT or UserRefresh options for the client\n     * @returns JWT or UserRefresh Client with data\n     */\n    _cacheClientFromJSON(json, options) {\n        let client;\n        // create either a UserRefreshClient or JWT client.\n        options = options || {};\n        if (json.type === 'authorized_user') {\n            client = new refreshclient_1.UserRefreshClient(options);\n        }\n        else {\n            options.scopes = this.scopes;\n            client = new jwtclient_1.JWT(options);\n            client.defaultScopes = this.defaultScopes;\n        }\n        client.fromJSON(json);\n        // cache both raw data used to instantiate client and client itself.\n        this.jsonContent = json;\n        this.cachedCredential = client;\n        return this.cachedCredential;\n    }\n    fromStream(inputStream, optionsOrCallback = {}, callback) {\n        let options = {};\n        if (typeof optionsOrCallback === 'function') {\n            callback = optionsOrCallback;\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        if (callback) {\n            this.fromStreamAsync(inputStream, options).then(r => callback(null, r), callback);\n        }\n        else {\n            return this.fromStreamAsync(inputStream, options);\n        }\n    }\n    fromStreamAsync(inputStream, options) {\n        return new Promise((resolve, reject) => {\n            if (!inputStream) {\n                throw new Error('Must pass in a stream containing the Google auth settings.');\n            }\n            let s = '';\n            inputStream\n                .setEncoding('utf8')\n                .on('error', reject)\n                .on('data', chunk => (s += chunk))\n                .on('end', () => {\n                try {\n                    try {\n                        const data = JSON.parse(s);\n                        const r = this._cacheClientFromJSON(data, options);\n                        return resolve(r);\n                    }\n                    catch (err) {\n                        // If we failed parsing this.keyFileName, assume that it\n                        // is a PEM or p12 certificate:\n                        if (!this.keyFilename)\n                            throw err;\n                        const client = new jwtclient_1.JWT({\n                            ...this.clientOptions,\n                            keyFile: this.keyFilename,\n                        });\n                        this.cachedCredential = client;\n                        return resolve(client);\n                    }\n                }\n                catch (err) {\n                    return reject(err);\n                }\n            });\n        });\n    }\n    /**\n     * Create a credentials instance using the given API key string.\n     * @param apiKey The API key string\n     * @param options An optional options object.\n     * @returns A JWT loaded from the key\n     */\n    fromAPIKey(apiKey, options) {\n        options = options || {};\n        const client = new jwtclient_1.JWT(options);\n        client.fromAPIKey(apiKey);\n        return client;\n    }\n    /**\n     * Determines whether the current operating system is Windows.\n     * @api private\n     */\n    _isWindows() {\n        const sys = os.platform();\n        if (sys && sys.length >= 3) {\n            if (sys.substring(0, 3).toLowerCase() === 'win') {\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n     * Run the Google Cloud SDK command that prints the default project ID\n     */\n    async getDefaultServiceProjectId() {\n        return new Promise(resolve => {\n            child_process_1.exec('gcloud config config-helper --format json', (err, stdout) => {\n                if (!err && stdout) {\n                    try {\n                        const projectId = JSON.parse(stdout).configuration.properties.core\n                            .project;\n                        resolve(projectId);\n                        return;\n                    }\n                    catch (e) {\n                        // ignore errors\n                    }\n                }\n                resolve(null);\n            });\n        });\n    }\n    /**\n     * Loads the project id from environment variables.\n     * @api private\n     */\n    getProductionProjectId() {\n        return (process.env['GCLOUD_PROJECT'] ||\n            process.env['GOOGLE_CLOUD_PROJECT'] ||\n            process.env['gcloud_project'] ||\n            process.env['google_cloud_project']);\n    }\n    /**\n     * Loads the project id from the GOOGLE_APPLICATION_CREDENTIALS json file.\n     * @api private\n     */\n    async getFileProjectId() {\n        if (this.cachedCredential) {\n            // Try to read the project ID from the cached credentials file\n            return this.cachedCredential.projectId;\n        }\n        // Ensure the projectId is loaded from the keyFile if available.\n        if (this.keyFilename) {\n            const creds = await this.getClient();\n            if (creds && creds.projectId) {\n                return creds.projectId;\n            }\n        }\n        // Try to load a credentials file and read its project ID\n        const r = await this._tryGetApplicationCredentialsFromEnvironmentVariable();\n        if (r) {\n            return r.projectId;\n        }\n        else {\n            return null;\n        }\n    }\n    /**\n     * Gets the Compute Engine project ID if it can be inferred.\n     */\n    async getGCEProjectId() {\n        try {\n            const r = await gcpMetadata.project('project-id');\n            return r;\n        }\n        catch (e) {\n            // Ignore any errors\n            return null;\n        }\n    }\n    getCredentials(callback) {\n        if (callback) {\n            this.getCredentialsAsync().then(r => callback(null, r), callback);\n        }\n        else {\n            return this.getCredentialsAsync();\n        }\n    }\n    async getCredentialsAsync() {\n        await this.getClient();\n        if (this.jsonContent) {\n            const credential = {\n                client_email: this.jsonContent.client_email,\n                private_key: this.jsonContent.private_key,\n            };\n            return credential;\n        }\n        const isGCE = await this._checkIsGCE();\n        if (!isGCE) {\n            throw new Error('Unknown error.');\n        }\n        // For GCE, return the service account details from the metadata server\n        // NOTE: The trailing '/' at the end of service-accounts/ is very important!\n        // The GCF metadata server doesn't respect querystring params if this / is\n        // not included.\n        const data = await gcpMetadata.instance({\n            property: 'service-accounts/',\n            params: { recursive: 'true' },\n        });\n        if (!data || !data.default || !data.default.email) {\n            throw new Error('Failure from metadata server.');\n        }\n        return { client_email: data.default.email };\n    }\n    /**\n     * Automatically obtain a client based on the provided configuration.  If no\n     * options were passed, use Application Default Credentials.\n     */\n    async getClient(options) {\n        if (options) {\n            throw new Error('Passing options to getClient is forbidden in v5.0.0. Use new GoogleAuth(opts) instead.');\n        }\n        if (!this.cachedCredential) {\n            if (this.jsonContent) {\n                this._cacheClientFromJSON(this.jsonContent, this.clientOptions);\n            }\n            else if (this.keyFilename) {\n                const filePath = path.resolve(this.keyFilename);\n                const stream = fs.createReadStream(filePath);\n                await this.fromStreamAsync(stream, this.clientOptions);\n            }\n            else {\n                await this.getApplicationDefaultAsync(this.clientOptions);\n            }\n        }\n        return this.cachedCredential;\n    }\n    /**\n     * Creates a client which will fetch an ID token for authorization.\n     * @param targetAudience the audience for the fetched ID token.\n     * @returns IdTokenClient for making HTTP calls authenticated with ID tokens.\n     */\n    async getIdTokenClient(targetAudience) {\n        const client = await this.getClient();\n        if (!('fetchIdToken' in client)) {\n            throw new Error('Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.');\n        }\n        return new idtokenclient_1.IdTokenClient({ targetAudience, idTokenProvider: client });\n    }\n    /**\n     * Automatically obtain application default credentials, and return\n     * an access token for making requests.\n     */\n    async getAccessToken() {\n        const client = await this.getClient();\n        return (await client.getAccessToken()).token;\n    }\n    /**\n     * Obtain the HTTP headers that will provide authorization for a given\n     * request.\n     */\n    async getRequestHeaders(url) {\n        const client = await this.getClient();\n        return client.getRequestHeaders(url);\n    }\n    /**\n     * Obtain credentials for a request, then attach the appropriate headers to\n     * the request options.\n     * @param opts Axios or Request options on which to attach the headers\n     */\n    async authorizeRequest(opts) {\n        opts = opts || {};\n        const url = opts.url || opts.uri;\n        const client = await this.getClient();\n        const headers = await client.getRequestHeaders(url);\n        opts.headers = Object.assign(opts.headers || {}, headers);\n        return opts;\n    }\n    /**\n     * Automatically obtain application default credentials, and make an\n     * HTTP request using the given options.\n     * @param opts Axios request options for the HTTP request.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async request(opts) {\n        const client = await this.getClient();\n        return client.request(opts);\n    }\n    /**\n     * Determine the compute environment in which the code is running.\n     */\n    getEnv() {\n        return envDetect_1.getEnv();\n    }\n    /**\n     * Sign the given data with the current private key, or go out\n     * to the IAM API to sign it.\n     * @param data The data to be signed.\n     */\n    async sign(data) {\n        const client = await this.getClient();\n        const crypto = crypto_1.createCrypto();\n        if (client instanceof jwtclient_1.JWT && client.key) {\n            const sign = await crypto.sign(client.key, data);\n            return sign;\n        }\n        const projectId = await this.getProjectId();\n        if (!projectId) {\n            throw new Error('Cannot sign data without a project ID.');\n        }\n        const creds = await this.getCredentials();\n        if (!creds.client_email) {\n            throw new Error('Cannot sign data without `client_email`.');\n        }\n        const url = `https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/${creds.client_email}:signBlob`;\n        const res = await this.request({\n            method: 'POST',\n            url,\n            data: {\n                payload: crypto.encodeBase64StringUtf8(data),\n            },\n        });\n        return res.data.signedBlob;\n    }\n}\nexports.GoogleAuth = GoogleAuth;\n/**\n * Export DefaultTransporter as a static property of the class.\n */\nGoogleAuth.DefaultTransporter = transporters_1.DefaultTransporter;\n//# sourceMappingURL=googleauth.js.map"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}